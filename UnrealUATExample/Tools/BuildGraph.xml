<?xml version='1.0' ?>
<!--
For more information on build graph go to https://dev.epicgames.com/documentation/en-us/unreal-engine/buildgraph-script-anatomy-for-unreal-engine
To run this build graph run [path to RunUAT script] -Script=[path to this file] -Target="[Name of the node you want to run]"

To pass parameter values for TargetProject and stuff use something like
./RunUAT.bat BuildGraph -Script=MyBuildGraph.xml -Target=MyProject -Set:MyBooleanOption=true -Set:MyStringValue="Hello World"
-->
<BuildGraph xmlns="http://www.epicgames.com/BuildGraph"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.epicgames.com/BuildGraph ../../../Engine/Build/Graph/Schema.xsd">

    <Option Name="TargetProject" Restrict="[^ ]*" DefaultValue="kjlkjlj" Description="The target project"/>
    <Option Name="TargetName" Restrict="[^ ]*" DefaultValue="Aura" Description="The target project"/>
    <Option Name="BuildType" Restrict="Development|Debug" DefaultValue="Development" Description= "Type of editor to compile" />
    <Option Name="TestName" DefaultValue="'Aura.'" Description="Test to run"/>

    <Agent Name="Default Agent" Type="Win64">
        <Node Name="Compile UnrealEditor Win64" Produces="#EditorBinaries">
            <Compile Target="$(TargetName)Editor" Platform="Win64" 
            Configuration="$(BuildType)" Project="$(TargetProject)" Tag="#EditorBinaries" Arguments="-NullRHI"/>
        </Node>

        <Node Name="Run Client Tests" Requires="#EditorBinaries" Produces="#ClientTests">
            <Spawn Exe="C:\Program Files\Epic Games\UE_5.6\Engine\Binaries\Win64\UnrealEditor-Cmd.exe" Arguments="$(TargetProject) -unattended -nopause -nosplash -NullRHI -ExecCmds='Automation RunTest Aura;Quit' -ReportExportPath='C:\reports' -ReportOutputFormats=json -TestExit='Automation Test Queue Empty' -Log -Verbose"  LogOutput="true"/>
        </Node>

        <Node Name="Run Client Tests2" Requires="#EditorBinaries" Produces="#ClientTests2">
            <Command Name="RunUnreal" Arguments="-Test=UE.TargetAutomation -Build=Editor -Project=$(TargetProject) -RunTest=$(TestName) -NullRHI -ReportExportPath='D:\testReport'"/>
        </Node>
        
        <Node Name="Run Functional Tests" Requires="#EditorBinaries"  Produces="#FunctionalTests">
            <Command Name="RunUnreal" Arguments="-Test=UE.TargetAutomation -Build=Editor -Project=$(TargetProject) -RunTest='Project.Functional Tests.Maps.' -NullRHI -Log"/>
        </Node>
        
        <Node Name="Run All Tests" Requires="#ClientTests;#FunctionalTests">
        </Node>
        
        <Node Name="Start build">
            <Command Name="Turnkey" Arguments="-ScriptsForProject='C:/Users/oroz0020/Downloads/RPGParty/RPGParty.uproject' -command=VerifySdk -platform=Win64 -UpdateIfNeeded -EditorIO -EditorIOPort=63119  -project='C:/Users/oroz0020/Downloads/RPGParty/RPGParty.uproject'"/>
        </Node>
        
        <Node Name="Make Build" Requires="Start Build">
            <Command Name="BuildCookRun" Arguments="-nop4 -utf8output -nocompileeditor -skipbuildeditor -cook -project='C:/Users/oroz0020/Downloads/RPGParty/RPGParty.uproject' -target=RPGParty -unrealexe='C:\Program Files\Epic Games\UE_5.6\Engine\Binaries\Win64\UnrealEditor-Cmd.exe' -platform=Win64 -installed -stage -archive -package -build -pak -iostore -compressed -prereqs -archivedirectory='C:/Users/oroz0020/Downloads/Release/Graph' -clientconfig=Shipping -nodebuginfo "/>
        </Node>
    </Agent>
</BuildGraph>

<!--
Start Build
 -ScriptsForProject="C:/Users/oroz0020/Downloads/RPGParty/RPGParty.uproject" Turnkey -command=VerifySdk -platform=Win64 -UpdateIfNeeded -EditorIO -EditorIOPort=63119  -project="C:/Users/oroz0020/Downloads/RPGParty/RPGParty.uproject"


Make Build
   BuildCookRun -nop4 -utf8output -nocompileeditor -skipbuildeditor -cook -project='C:/Users/oroz0020/Downloads/RPGParty/RPGParty.uproject' -target=RPGParty -unrealexe='C:\Program Files\Epic Games\UE_5.6\Engine\Binaries\Win64\UnrealEdito
r-Win64-DebugGame-Cmd.exe' -platform=Win64 -installed -stage -archive -package -build -pak -iostore -compressed -prereqs -archivedirectory='C:/Users/oroz0020/Downloads/Release/Graph' -clientconfig=Shipping -nodebuginfo


Unused yet
      -nocompile -nocompileuat
-->
